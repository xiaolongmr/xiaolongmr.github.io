"use strict";var _createClass=function(){function t(t,a){for(var e=0;e<a.length;e++){var s=a[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(a,e,s){return e&&t(a.prototype,e),s&&t(a,s),a}}();function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}!function(){var t=function(){function t(a){var e=this;_classCallCheck(this,t);var s={logo:"OwO表情",container:document.getElementsByClassName("OwO")[0],target:document.getElementsByTagName("textarea")[0],position:"up",width:"100%",maxHeight:"235px",api:"https://dh.z-l.top/js/owo.json"};for(var i in s)s.hasOwnProperty(i)&&!a.hasOwnProperty(i)&&(a[i]=s[i]);this.container=a.container,this.target=a.target,"up"===a.position&&this.container.classList.add("OwO-up");var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300||304===n.status?(e.odata=JSON.parse(n.responseText),e.init(a)):console.log("OwO data request was unsuccessful: "+n.status))},n.open("get",a.api,!0),n.send(null)}return _createClass(t,[{key:"init",value:function(t){var a=this;this.area=t.target,this.packages=Object.keys(this.odata);for(var e='\n <div class="OwO-logo">'+t.logo+'</div>\n <div class="OwO-body" style="width: '+t.width+'">',s=0;s<this.packages.length;s++){e+='\n <ul class="OwO-items OwO-'+this.odata[this.packages[s]].name+" OwO-items-"+this.odata[this.packages[s]].type+'" style="max-height: '+(parseInt(t.maxHeight)-53)+'px;">';for(var i=this.odata[this.packages[s]].container,n=0;n<i.length;n++)"image"===this.odata[this.packages[s]].type?e+='\n <li class="OwO-item" title="'+i[n].text+'" data-input="'+this.odata[this.packages[s]].name+"/"+i[n].icon+'"><img data-original="https://emoticons.z-l.top/'+this.odata[this.packages[s]].name+"/"+i[n].icon+'.png" src="" icon="'+i[n].text+'"></li>':"cat"===this.odata[this.packages[s]].type?e+='\n <li class="OwO-item" title="'+i[n].text+'" data-input="'+this.odata[this.packages[s]].name+i[n].icon+'"><img data-original="https://npm.elemecdn.com/blobcat@1.0.0/'+i[n].icon+'.png" src="" icon="'+i[n].text+'"></li>':"bb_"===this.odata[this.packages[s]].type?e+='\n <li class="OwO-item" title="'+i[n].text+'" data-input="'+this.odata[this.packages[s]].name+i[n].icon+'"><img data-original="https://unpkg.com/@waline/emojis@1.1.0/bilibili/bb_'+i[n].icon+'.png" src="" icon="'+i[n].text+'"></li>':e+='\n <li class="OwO-item" title="'+i[n].text+'">'+i[n].icon+"</li>";e+="\n </ul>"}e+='\n <div class="OwO-bar">\n <ul class="OwO-packages">';for(var o=0;o<this.packages.length;o++)e+="\n <li><span>"+this.packages[o]+"</span></li>";e+="\n </ul>\n </div>\n </div>\n ",this.container.innerHTML=e,this.logo=this.container.getElementsByClassName("OwO-logo")[0],this.logo.addEventListener("click",(function(){a.toggle()})),this.container.getElementsByClassName("OwO-body")[0].addEventListener("click",(function(t){var e=null;if(t.target.classList.contains("OwO-item")?e=t.target:t.target.parentNode.classList.contains("OwO-item")&&(e=t.target.parentNode),e){var s,i=a.area.selectionStart,n=a.area.selectionEnd,o=a.area.value;s=e.dataset.hasOwnProperty("input")?"【"+e.dataset.input+"】":e.innerHTML,a.area.value=o.slice(0,i)+s+o.slice(n),a.area.selectionStart=i+s.length,a.area.selectionEnd=i+s.length,a.area.focus(),a.toggle()}})),this.packagesEle=this.container.getElementsByClassName("OwO-packages")[0];for(var c=function(t){var e;e=t,a.packagesEle.children[t].addEventListener("click",(function(){a.tab(e)}))},l=0;l<this.packagesEle.children.length;l++)c(l);this.tab(0)}},{key:"toggle",value:function(){this.container.classList.contains("OwO-open")?this.container.classList.remove("OwO-open"):this.container.classList.add("OwO-open");try{$("img").lazyload({effect:"fadeIn"})}catch(a){if(this.container.classList.contains("OwO-open")){var t=this.container.querySelectorAll(".OwO-items.OwO-items-show>li img");[].forEach.call(t,(function(t){var a=t.dataset.original;a&&(t.src=a,t.removeAttribute("data-src"))}))}}}},{key:"tab",value:function(t){var a=this.container.getElementsByClassName("OwO-items-show")[0];a&&a.classList.remove("OwO-items-show"),this.container.getElementsByClassName("OwO-items")[t].classList.add("OwO-items-show");var e=this.container.getElementsByClassName("OwO-package-active")[0];e&&e.classList.remove("OwO-package-active"),this.packagesEle.getElementsByTagName("li")[t].classList.add("OwO-package-active");try{$("img").lazyload({effect:"fadeIn"})}catch(t){if(this.container.classList.contains("OwO-open")){var s=this.container.querySelectorAll(".OwO-items.OwO-items-show>li img");[].forEach.call(s,(function(t){var a=t.dataset.original;a&&(t.src=a,t.removeAttribute("data-original"))}))}}}}]),t}();"undefined"!=typeof module&&void 0!==module.exports?module.exports=t:window.OwO=t}();